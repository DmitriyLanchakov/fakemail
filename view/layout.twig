<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A layout example that shows off a responsive email layout.">
    <title>Fakemail</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.4.2/pure-min.css">
    <!--[if lte IE 8]>
    <link rel="stylesheet" href="/css/email-old-ie.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
    <link rel="stylesheet" href="/css/email.css">
    <!--<![endif]-->
    <!--[if lt IE 9]>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.js"></script>
    <![endif]-->
</head>
<body>
<div id="layout" class="content pure-g">
    <div id="nav" class="pure-u">
        <a href="/" class="nav-menu-button">Menu</a>

        <div class="nav-inner">
            <a href="/" class="primary-button pure-button">FakeMail</a>

            <div class="pure-menu pure-menu-open">
                <ul>
                    {% for dir in dirs %}
                    <li {{ dir.selected ? 'class="pure-menu-selected"' }}><a href="{{ dir.link }}">{{ dir.text }}</a></li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>

    <div id="list" class="pure-u-1">
        {% for file in files %}
            <a href="{{ file.link }}" class="email-item {{ file.selected ? 'email-item-selected'}} pure-g"> {#email-item-unread#}
                <div class="pure-u">
                    <img class="email-avatar" height="64" width="64" src="{{ file.avatar }}">
                </div>

                <div class="pure-u-3-4">
                    <h5 class="email-name">{{ file.mail.to|join(', ') }}</h5>
                    <h4 class="email-subject">{{ file.mail.subject }}</h4>
                    <p class="email-desc">
                        {{ file.mail.body|raw }}
                    </p>
                </div>
            </a>
        {% endfor %}
    </div>

    <div id="main" class="pure-u-1">
        <div class="email-content" data-container-switch-view>
            {% block email %}
            <div class="email-content-header pure-g">
                <div class="pure-u-1-2">
                    <h1 class="email-content-title">Select email to read</h1>
                </div>
            </div>
            <div class="email-content-body">
                <p>
                    You can navigate through days in left panel. You can view list of emails in selected day in middle panel.
                    When you click on email in middle panel it will be opened here. You can view html, text and source
                    representation of each email.
                </p>
            </div>
            {% endblock %}
        </div>
    </div>
</div>

<script src="http://yui.yahooapis.com/3.14.1/build/yui/yui-min.js"></script>
<script>
    YUI().use('node-base', 'node-event-delegate', function (Y) {

        var menuButton = Y.one('.nav-menu-button'),
                nav        = Y.one('#nav');

        // Setting the active class name expands the menu vertically on small screens.
        menuButton.on('click', function (e) {
            nav.toggleClass('active');
        });

        // Your application code goes here...

    });
</script>

<script>
    YUI().use('node-base', 'node-event-delegate', function (Y) {
        // This just makes sure that the href="#" attached to the <a> elements
        // don't scroll you back up the page.
        Y.one('body').delegate('click', function (e) {
            e.preventDefault();
        }, 'a[href="#"]');
    });
</script>

<script>
    YUI().use('node-base', 'node-event-delegate', function (Y) {
        Y.one('[data-switch-view]').delegate('click', function (e) {
//            alert(1);
//            var node = Y.one('[data-container-switch-view]');
//            node.removeClass('switch-view-html');
//            node.removeClass('switch-view-text');
//            node.removeClass('switch-view-source');
        });
    });
</script>
</body>
</html>
